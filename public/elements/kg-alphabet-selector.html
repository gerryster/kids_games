<polymer-element name="kg-alphabet-selector" attributes="model gameOver">
  <template>
    <template repeat="{{alphabet}}">
      <label for="letter-{{letter}}">{{letter}}</label>
      <input type="radio" name="letter" id="letter-{{letter}}" value="{{letter}}" on-click="clickLetter"><br>
    </template>
  </template>
  <script>
    Polymer('kg-alphabet-selector', {
      ready: function() {
        var self = this;

        // allow letters to be chosen by keyboard
        document.addEventListener('keyup', function(event) {
          var guess = String.fromCharCode(event.keyCode);
          var guessFound = _.find(self.alphabet,
              function(letter_obj){ return letter_obj.letter === guess });
          if(guessFound) { self.selectLetter(guess); }
        }, true);
      },

      initAlphabet: function() {
        var alphabet = [];
        ("ABCDEFGHIJKLMNOPQRSTUVWXYZ").split("").forEach(function(letter, i) {
          alphabet.push({letter: letter});
        });
        this.alphabet = alphabet;
      },

      clickLetter: function(event){ this.selectLetter(event.target.value); },

      selectLetter: function(letter) {
        this.model.guessLetter(letter);
        this.alphabet = _.filter(this.alphabet,
            function(letter_obj){ return letter_obj.letter !== letter })
      },

      gameOverChanged: function() {
        // re-initalize this element when the game starts
        !this.gameOver && this.initAlphabet();
      }
    });
  </script>
</polymer-element>
